<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            width: 100vw;
            height: 100vh;
            background-image: linear-gradient(90deg, #ffafbd, #ffc3a0);
            /* 颜色渐变 */
            display: flex;
            /* 设置弹性盒子 */
            justify-content: center;
            /* 设置主轴上的子元素排列方式 */
            align-items: center;
            /* 设置侧轴上的子元素排列方式（单行）*/
        }

        .con {
            padding: 30px 40px 20px;
            text-align: center;
            width: 440px;
            margin: 0 auto;
            border-radius: 15px;
            display: flex;
            /* 设置弹性盒子 */
            flex-direction: column;
            /* flex-direction ：设置主轴的方向从上到下 */
            background: #f2f2f2;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header-img {
            width: 80px;
            margin-right: 10px;
        }

        img {
            width: 100%;
            height: 100%;
        }

        .header-todo {
            transform: rotate(3deg);
            font-size: 21px;
            padding: 0.25em 0.8em 0.15em;
            border-radius: 20% 5% 20% 5%/5% 20% 25% 20%;
            color: #fff;
            background: #fe7345;
        }

        .middle {
            margin-top: 25px
        }

        .middle-h1 {
            font-size: 22px;
            margin-bottom: 18px;
        }

        .middle-bottom {
            display: flex;
            /* 设置弹性盒子 */
            justify-content: center;
            /* 设置主轴上的子元素排列方式 */
        }

        .middle-input {
            /* flex-grow: .65; */
            margin-right: 15px;
        }

        .middle-input input {
            width: 100%;
            border: 0;
            border-bottom: 3px dashed #fe7345;
            padding: 5px 0 3px;
            font-size: 18px;
            background: transparent;
            outline: 0px;
        }

        .middle-button {
            position: relative;
            transform: rotate(4deg);
            border-radius: 6px;
            /* padding: 10px; */
        }

        .middle-button span {
            position: relative;
            display: block;
            font-size: 16.5px;
            padding: 6px 14px;
            border: 2px solid #494a4b;
            border-radius: 6px;
            background-color: #fff;
        }

        .middle-button:before {
            position: absolute;
            left: 0;
            top: 0;
            content: "";
            width: 100%;
            height: 100%;
            transform: scaleY(1.1);
            border: 1px solid #494a4b;
            border-radius: inherit;
            transform-origin: top;
            background-image: url(data:image/png;base64,R0lGODlhBAAEAIABAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjEgNjQuMTQwOTQ5LCAyMDEwLzEyLzA3LTEwOjU3OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgV2luZG93cyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NUY1OENCRDdDMDYxMUUyOTEzMEE1MEM5QzM0NDVBMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NUY1OENCRTdDMDYxMUUyOTEzMEE1MEM5QzM0NDVBMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjk1RjU4Q0JCN0MwNjExRTI5MTMwQTUwQzlDMzQ0NUEzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjk1RjU4Q0JDN0MwNjExRTI5MTMwQTUwQzlDMzQ0NUEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAAQABAAAAgYEEpdoeQUAOw==);
            background-color: #fe7345;
        }

        #footer {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 30px;
            gap: 10px;
            /* 指的是column和row之间的间隔的大小，分别针对上下间距和左右间距 */
        }

        #footer span {
            font-size: 17px;
            padding-top: 5px;
            color: rgba(73, 74, 75, .45);
        }

        #todos {
            margin-top: 40px;
        }

        #todos li {
            margin: auto;
            width: 78%;
            display: flex;
            align-items: center;
            padding: 8px 10px 8px 0;
            border-radius: 5px;
            justify-content: space-between;
            padding-left: 5px;
            margin-top: 10px;
        }

        /* #checkbox-bth {
            padding: 0 8px;
        } */

        #checkbox {
            display: flex;
            align-items: center;
        }

        .checkbox-box {
            border: 1px solid black;
            width: 14px;
            height: 14px;
            border-radius: 3px;
            margin-right: 5px;
        }

        .checkbox-dui {
            border-radius: 3px;
            margin-right: 5px;
        }

        #below {
            margin: auto;
            width: 90%;
            margin: auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 100px;
            box-sizing: border-box;
            font-size: 12px;
        }

        #nots {
            margin-right: 10px;
        }

        .below-filters {
            display: flex;
            align-items: center;
        }

        .below-All {
            color: #fff;
            padding: 2px 10px;
            border-radius: 5px;
            color: black;

        }

        .selected {
            background-color: #fe7345;
            margin: auto;
            /* width: 78%; */
            display: flex;
            align-items: center;
            padding: 8px 10px 8px 0;
            border-radius: 5px;
            justify-content: space-between;
            padding-left: 5px;
            color: white;
        }

        .option {
            padding: 0 10px;
        }

        .active {
            background-color: #fe7345;
            color: white
        }
    </style>
</head>

<body>
    <div class="con">
        <div class="header">
            <div class="header-img">
                <img src="./note.75134fb0.svg" alt="">
            </div>
            <div class="header-todo">
                To-Do List
            </div>
        </div>
        <div class="middle">
            <h1 class="middle-h1">~ Today I need to ~</h1>
            <div class="middle-bottom">
                <div class="middle-input">
                    <input type="text" id="input" placeholder="Add new todo...">
                </div>
                <div class="middle-button">
                    <span>Submit</span>
                </div>
            </div>
        </div>
        <ul id="todos">
            <!-- <li>
                <div id="checkbox">
                    <div class="checkbox-box"></div>
                    sad
                </div>
                <span>X</span>
            </li>
            <li class="selected">
                <div id="checkbox">
                    <div class="checkbox-dui">✔</div> <s>
                        sad
                    </s>
                </div>
                <span>✖</span>
            </li> -->
        </ul>
        <div id="footer">
            √
            <span>Congrat, you have no more tasks to do</span>
        </div>
        <div id="below">
            <p id="nots"></p>
            <div class="below-filters">
                <span class="below-All active" id="all1">All</span>
                <span class="below-All" id="all2">Active</span>
                <span class="below-All" id="all3">Completed</span>
            </div>
            <span class="below-All" id="all4">Clear completed</span>
        </div>

    </div>
</body>
<script>
    let all1 = document.getElementById('all1')
    let all2 = document.getElementById('all2')
    let all3 = document.getElementById('all3')
    let all4 = document.getElementById('all4')
    let input = document.getElementById('input')
    let exid = 0
    // 这个变量来判断显示什么数据
    // 0:全部1：未选择2：选中的
    let belowAll = document.getElementsByClassName('below-All')
    console.log(belowAll);
    // 通过id过去input节点
    let button = document.getElementsByClassName('middle-button')
    console.log(button);
    var arr = [];
    // 全部的数据都保存在这里
    let ul = document.getElementById('todos')
    // 拿到ul节点
    toggles()
    // 进入页面就判断节点的显示和隐藏
    var falseNum = 0
    console.log(input);
    input.addEventListener('keyup', function (e) {
        if (e.keyCode == 13) {
            // 判断按下的是不是enter
            if (input.value == "") {
                return false
            }
            var todo = {
                title: input.value,
                status: false,
            }
            arr.push(todo)
            input.value = ""
            chunchu(arr)
            // 调用存储数据函数
            locd()
            // 每添加一次就更新一次页面
            toggles()
            // 每一次添加更新页面都需要去判断那个隐藏那个显示
            footToggles()
            // 控制底部按钮的显示和隐藏
        }
    })
    // 对input进行事件监听
    button[0].addEventListener('click', function (e) {
        if (input.value == "") {
            return false
        }
        var todo = {
            title: input.value,
            status: false,
        }
        arr.push(todo)
        input.value = ""
        chunchu(arr)
        // 调用存储数据函数
        locd()
        // 每添加一次就更新一次页面
        toggles()
        // 每一次添加更新页面都需要去判断那个隐藏那个显示
        footToggles()
    })
    // 对input进行事件监听
    function chunchu(arr) {
        localStorage.setItem('todoList', JSON.stringify(arr))
    }
    // 把数据存储到本地
    function locd() {
        ul.innerHTML = ""
        // 每次复用都把ul置空否则删除时就会出bug,会造成重复渲染的问题
        arr.forEach((item, index) => {
            var li = document.createElement('li')
            // 这里创建一个li节点赋值给变量li
            // document.createElement()是在对象中创建一个对象
            if (item.status == false) {
                // 判断状态是选中还是未选择根据不同的状态来写不同的样式
                li.innerHTML = `<div id="checkbox">
                    <div class="checkbox-box" id="${index}"></div>
                    ${item.title}
                </div>
            <span id="${index}">✖</span>`
                // 把X号id赋值为总数据的下标，下面用这个下标来实现数组删除
                // innerHTML在JS是双向功能：获取对象的内容 或 向对象插入内容；
                falseLi = li
            }
            else {
                li.innerHTML = `
                <div class="checkbox" id="${index}">✔ <s>
                        sad
                    </s>
                </div>
                <span id="${index}">✖</span>
            `
                li.style.backgroundColor = "#fe7345"
                li.style.color = "#ffffff"
                trueLi = li
            }
            if (exid == 0) {
                ul.insertBefore(li, ul.children[0]);
                // 在这里是给ul节点里的子节点[0]前面添加li
                // ul.appendChild(li)
                // 在这里是给ul节点里的子节点末尾添加li
                // appendChild() 方法在节点的子节点列表末添加新的子节点
            }
            // 如果是0就渲染全部的（选中和未选择的）
            if (exid == 1) {
                ul.insertBefore(falseLi, ul.children[0]);
            }
            // 如果是1就渲染未选择的
            if (exid == 2) {
                ul.insertBefore(trueLi, ul.children[0]);
            }
            // 如果是2就渲染选中的

        })
        falseNum = arr.filter(i => i.status == false).length
        // 判断未选中的数据的数量有多少个
        let nots = document.getElementById('nots')
        nots.innerHTML = `${falseNum} item left`
        // 把未选择的数量渲染到页面上
    }
    // 让数据在页面上显示
    function toggles() {
        if (arr.length != 0) {
            let footer = document.getElementById('footer')
            footer.style.display = "none"
            // 给footer设置隐藏
            let below = document.getElementById('below')
            below.style.display = "flex"
            // 这里要赋值flex否则布局会乱掉
        }
        // 只要有一条数据就隐藏footer 只要有一条数据就显示below
        else {
            console.log(1);
            footer.style.display = "block"
            below.style.display = "none"
        }
    }
    // 控制页面节点的显示和隐藏

    ul.addEventListener('click', function (e) {
        console.log(e.target.nodeName);
        // nodeName检测元素节点名称<p>aaaa</p>则返回 P;返回值是大写的,一般用来判断
        if (e.target.nodeName == "SPAN") {
            // 判断是不是点击的节点名称是不是SPAN
            // console.log(e.target);
            arr.splice(e.target.id, 1)
            // x(删除)的id就是arr的下标,由此可以判断出点击的时哪一个，然后用数组方法删除
        }
        locd()
        // 删除完一次也就更新一次页面
        toggles()
        // 删除完判断节点那个隐藏那个显示
    })
    // 点击删除

    ul.addEventListener('click', function (e) {
        console.log(e.target);
        if (e.target.nodeName == "DIV") {
            // 这里判断是不是点击的节点名称是不是DIV
            // nodeName检测元素节点名称<p>aaaa</p>则返回 P;返回值是大写的,一般用来判断
            arr[e.target.id].status = !arr[e.target.id].status
            // 改变状态为相反值
            // console.log(e.target.id);
            // console.log(arr[e.target.id].status);
            locd()
            // 改变了状态也要重新渲染
            footToggles()
            // 根据选中状态来控制下面节点的显示和隐藏
        }
    })
    // 改变选中状态

    function footToggles() {
        let lengths = arr.filter(i => i.status == true).length
        if (lengths == 0) {
            all2.style.display = "none"
            all4.style.display = "none"
            all3.style.display = "none"
        }
        else if (lengths == arr.length) {
            all2.style.display = "none"
            all3.style.display = "none"
            all1.style.display = "block"
            all4.style.display = "block"
        }
        else if (lengths != 0) {
            all2.style.display = "block"
            all1.style.display = "block"
            all3.style.display = "block"
            all4.style.display = "block"
        }
    }
    // 通过判断来控制下面按钮的显示和隐藏

    function classBoss() {
        for (let i = 0; i < belowAll.length; i++) {
            // 使用for循环给每一个belowAll都设置点击事件
            belowAll[i].onclick = function () {
                exid = i;
                // 把当前点击按钮的下标赋值给exid
                // 这个变量来判断显示什么数据
                // 0:全部1：未选择2：选中的
                console.log(exid);
                if (exid == 3) {
                    arr = arr.filter(i => i.status == false)
                    console.log(arr);
                    exid = 0
                    locd()
                    footToggles()
                    // 根据选中状态来控制下面节点的显示和隐藏
                    belowAll[0].classList.add("active")
                    belowAll[0].classList.remove("active")
                }
                // exid是三的时候删除选中的
                locd()
                for (var j = 0; j < belowAll.length; j++) {
                    // 这里需要排他思想
                    belowAll[j].classList.remove("active")
                    // 先把所有带有active类名的删除
                    // 删除：节点.classList.remove("类名")；
                    this.classList.add("active")
                    // 只给当前点击的节点设置active
                    // 添加：节点.classList.add("类名")；
                }
            }
        }

    }
    classBoss()
    // 这个是点击下面节点变色


</script>

</html>